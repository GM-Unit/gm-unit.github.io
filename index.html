<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GM-UNIT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #050505;
  color: #bcbcbc;
  font-family: monospace;
  overflow: hidden;
}

#container {
  display: flex;
  height: 100vh;
  padding: 20px;
  box-sizing: border-box;
  overflow-y: auto;
}

#left {
  flex: 2;
  min-width: 320px;
}

#right {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

.section {
  margin-bottom: 18px;
}

.title {
  font-weight: bold;
  margin-bottom: 6px;
  min-height: 1em;
}

.subtext div {
  min-height: 1em;
}

#boot {
  position: fixed;
  inset: 0;
  background: #050505;
  padding: 20px;
  z-index: 10;
}

.fade-out {
  animation: fadeOut 1s forwards;
}

@keyframes fadeOut {
  to { opacity: 0; visibility: hidden; }
}

.bigtext {
  display: flex;
  gap: 40px;
  font-size: 48px;
  letter-spacing: 6px;
  opacity: 0;
}

.bigtext span {
  display: block;
}

.fade-in {
  animation: fadeIn 1.2s forwards;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

.red {
  color: #b00000;
  font-weight: bold;
}

.flicker {
  animation: flicker 0.08s infinite alternate;
}

@keyframes flicker {
  from { opacity: 1; }
  to { opacity: 0.2; }
}
</style>
</head>

<body>

<div id="boot"></div>

<div id="container" style="visibility:hidden;">
  <div id="left">

    <div class="section">
      <div class="title" id="cyber-title"></div>
      <div class="subtext" id="cyber-sub">
        <div data-text="Core_001˸ <span id='core1'>89</span>％"></div>
        <div data-text="Core_002˸ <span id='core2'>92</span>％"></div>
        <div data-text="Status˸ Suboptimal"></div>
      </div>
    </div>

    <div class="section">
      <div class="title" id="tc-title"></div>
      <div class="subtext" id="tc-sub">
        <div data-text="Piloting organic matter˸ 621"></div>
        <div data-text="Prediction_Subroutine_086˸ deviation detected"></div>
        <div data-text="Strategic_Recognition˸ degraded"></div>
      </div>
    </div>

    <div class="section">
      <div class="title" id="frame-title"></div>
      <div class="subtext" id="frame-sub">
        <div data-text="Optic_001˸ <span id='optic1'>52</span>％"></div>
        <div data-text="Optic_002˸ <span id='optic2'>78</span>％"></div>
        <div data-text="Hydraulics˸ failing"></div>
        <div data-text="Mobility_Delay˸ ＋0․41s"></div>
      </div>
    </div>

    <div class="section">
      <div class="title" id="chess-title"></div>
      <div class="subtext" id="chess-sub">
        <div data-text="Targeting_Accuracy˸ <span id='acc'>94</span>％"></div>
        <div data-text="Opening_Files˸ partial corruption"></div>
        <div data-text="Endgame_Protocol˸ INTACT"></div>
      </div>
    </div>

  </div>

  <div id="right">
    <div id="iron" class="bigtext">
      <span>IRON</span>
      <span>FORTRESS</span>
    </div>

    <div id="survivors" class="bigtext red" style="position:absolute; display:none;">
      <span>NO</span>
      <span>SURVIVORS</span>
    </div>
  </div>
</div>

<script>
const sleep = ms => new Promise(r => setTimeout(r, ms));

async function typeLine(el, text, speed = 18) {
  el.innerHTML = "";
  for (let c of text) {
    el.innerHTML += c;
    await sleep(speed);
  }
}

async function typeSub(id) {
  const lines = document.querySelectorAll(`#${id} [data-text]`);
  for (const line of lines) {
    await typeLine(line, line.dataset.text);
  }
}

// BOOT SEQUENCE
(async () => {
  const boot = document.getElementById("boot");
  const bootLines = [
    "≻ SYSTEM BOOT˸ GM-UNIT",
    "initialising cores...",
    "loading strategic matrices...",
    "synchronising endgame tables...",
    "WARNING˸ anomalies detected",
    "System_Online"
  ];

  for (const l of bootLines) {
    await typeLine(boot, boot.innerHTML + l + "<br>");
    await sleep(200);
  }

  await sleep(600);
  boot.classList.add("fade-out");

  await sleep(1000);
  document.getElementById("container").style.visibility = "visible";

  const iron = document.getElementById("iron");
  iron.classList.add("fade-in");

  await sleep(2000);

  // NO SURVIVORS flicker
  const surv = document.getElementById("survivors");
  iron.style.display = "none";
  surv.style.display = "flex";
  surv.classList.add("flicker");

  await sleep(700);

  surv.classList.remove("flicker");
  surv.style.display = "none";
  iron.style.display = "flex";

  // TITLES + SUBTEXT
  await Promise.all([
    typeLine(cyber-title, "［CYBERNETIC SYSTEMS］"),
    typeLine(tc-title, "［TC UNIT］"),
    typeLine(frame-title, "［FRAME ＆ SENSORS］"),
    typeLine(chess-title, "［CHESS OPERATIONS］")
  ]);

  await Promise.all([
    typeSub("cyber-sub"),
    typeSub("tc-sub"),
    typeSub("frame-sub"),
    typeSub("chess-sub")
  ]);
})();

// PERCENT FLICKER
function flicker(id, min, max) {
  setInterval(() => {
    document.getElementById(id).textContent =
      Math.floor(Math.random() * (max - min) + min);
  }, 300 + Math.random() * 300);
}

flicker("core1", 85, 92);
flicker("core2", 88, 95);
flicker("optic1", 48, 56);
flicker("optic2", 72, 82);
flicker("acc", 91, 96);
</script>

</body>
  </html>
