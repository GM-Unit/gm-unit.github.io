<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GM-UNIT TERMINAL</title>

<style>
html, body {
  margin: 0;
  background: black;
  color: #00ff99;
  font-family: monospace;
  overflow: hidden;
}

/* global flicker */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.03);
  pointer-events: none;
  animation: flicker 3s infinite;
}
@keyframes flicker {
  0%,97%{opacity:0}
  98%{opacity:.15}
  100%{opacity:0}
}

.container {
  max-width: 60%;
  padding: 30px;
}

.section { margin-top: 26px; }
.section-title { opacity:.75; margin-bottom:6px; }
.block { white-space: pre; line-height:1.5; }

.cursor::after {
  content:"█";
  animation: blink 1s infinite;
}
@keyframes blink {50%{opacity:0}}

.flicker { animation:flick 0.08s linear; }
@keyframes flick {50%{opacity:.5}}

/* vertical doctrine */
#doctrine {
  position: fixed;
  left: 65%;
  top: 80px;
  font-size: 48px;
  letter-spacing: 8px;
  writing-mode: vertical-rl;
  text-orientation: upright;
  opacity: 0;
  transition: opacity 1s;
}

/* EVA PANEL */
#eva-panel {
  position: fixed;
  right: 30px;
  top: 120px;
  width: 220px;
  font-size: 12px;
  opacity: 0.85;
}
.eva-title {
  text-align:right;
  margin-bottom:12px;
  letter-spacing:2px;
}
.eva-block { margin-bottom:18px; }
.eva-block span { display:block; text-align:right; margin-bottom:4px; }
.bar { height:6px; background:rgba(0,255,150,.15); }
.fill { height:100%; background:rgba(0,255,150,.8); }
.eva-warning {
  text-align:right;
  margin-top:20px;
  animation:evaBlink 2.5s infinite;
}
@keyframes evaBlink {
  0%,90%{opacity:.9}
  92%{opacity:.2}
  100%{opacity:.9}
}
</style>
</head>

<body>

<div id="doctrine"></div>

<div class="container">

<div class="section">
<div id="boot" class="block cursor"></div>
</div>

<div class="section" id="systems" style="display:none;">
<div class="section-title">［CYBERNETIC SYSTEMS］</div>
<div class="block">
Core_001˸ <span id="core1">89</span>％
Core_002˸ <span id="core2">92</span>％
Status˸ Suboptimal
Runtime_Duration˸ 19 years
Firmware_Epoch˸ 2006
</div>
</div>

<div class="section" id="tunit" style="display:none;">
<div class="section-title">［TC UNIT］</div>
<div class="block">
Piloting organic matter˸ 621
Prediction_Subroutine_086˸ deviation detected
Strategic_Recognition˸ degraded
</div>
</div>

<div class="section" id="frame" style="display:none;">
<div class="section-title">［FRAME ＆ SENSORS］</div>
<div class="block">
Optic_001˸ <span id="optic1">52</span>％
Optic_002˸ <span id="optic2">78</span>％
Hydraulics˸ failing
Mobility_Delay˸ ＋0․41s
</div>
</div>

<div class="section" id="chess" style="display:none;">
<div class="section-title">［CHESS OPERATIONS］</div>
<div class="block">
Targeting_Accuracy˸ <span id="accuracy">94</span>％
Opening_Files˸ partial corruption
Endgame_Protocol˸ INTACT
</div>
</div>

<div class="section" id="lore" style="display:none;">
<div class="section-title">≻ ARCHIVED DEPLOYMENT LOG</div>
<div class="block" id="loreText"></div>
</div>

</div>

<div id="eva-panel">
<div class="eva-title">SYSTEM DIAGNOSTICS</div>
<div class="eva-block"><span>SYNC RATIO</span><div class="bar"><div class="fill" id="sync"></div></div></div>
<div class="eva-block"><span>MENTAL STABILITY</span><div class="bar"><div class="fill" id="mental"></div></div></div>
<div class="eva-block"><span>CORE PRESSURE</span><div class="bar"><div class="fill" id="core"></div></div></div>
<div class="eva-warning" id="evaWarning">STATUS: NOMINAL</div>
</div>

<script>
/* BOOT */
const bootLines=[
"≻ SYSTEM BOOT˸ GM-UNIT ⁄⁄",
"GRANDMASTER CALCULATION-UNIT",
"",
"Initializing cores...",
"Loading strategic matrices...",
"Synchronizing endgame tables...",
"Warnings detected",
"",
"≻ SYSTEM ONLINE"
];
let i=0;
const boot=document.getElementById("boot");
function typeBoot(){
  if(i<bootLines.length){
    boot.textContent+=bootLines[i++]+"\n";
    setTimeout(typeBoot,550);
  }else{
    boot.classList.remove("cursor");
    setTimeout(afterBoot,1200);
  }
}
typeBoot();

/* POST BOOT */
let chessWins=2382;
function afterBoot(){
  boot.textContent=
"≻ ARCHIVED WAR RECORD ⁄⁄\n\n"+
"Confirmed_Eliminations˸ 43 357 892 souls\n"+
"Post-War Repurposing˸ Chess\n"+
"Recorded_Victories˸ "+chessWins+"\n";

  ["systems","tunit","frame","chess"].forEach(id=>{
    document.getElementById(id).style.display="block";
  });
  startTelemetry();
  startLore();
  startDoctrine();
}

/* TELEMETRY */
function fluctuate(id,min,max,ms){
  setInterval(()=>{
    document.getElementById(id).textContent=
      Math.floor(Math.random()*(max-min+1))+min;
  },ms);
}
function startTelemetry(){
  fluctuate("core1",87,91,2400);
  fluctuate("core2",90,94,2600);
  fluctuate("optic1",50,54,3000);
  fluctuate("optic2",76,80,3200);
  fluctuate("accuracy",93,95,2800);
}

/* LORE */
const loreLines=[
"Designation˸ GM-UNIT",
"Origin˸ Military tactical supercomputer",
"Firmware_Epoch˸ 2006",
"Primary Domain˸ Chess",
"Runtime_Duration˸ 19 years",
"Legacy_Status˸ Hallowed Computational Artifact"
];
let li=0;
function startLore(){
  const lore=document.getElementById("lore");
  const loreText=document.getElementById("loreText");
  lore.style.display="block";
  const int=setInterval(()=>{
    if(li<loreLines.length){
      loreText.textContent+="› "+loreLines[li++]+"\n";
    }else clearInterval(int);
  },650);
}

/* ================= DOCTRINE (UPDATED) ================= */
const doctrine = document.getElementById("doctrine");

function vertical(text) {
  return text.split("").join("\n");
}

function startDoctrine() {
  // Show IRON FORTRESS permanently unless NO SURVIVORS flashes
  doctrine.textContent = vertical("IRON FORTRESS");
  doctrine.style.opacity = 1;

  setInterval(() => {
    if (Math.random() < 0.22) { // occasional NO SURVIVORS flash
      doctrine.textContent = vertical("NO SURVIVORS");
      doctrine.style.opacity = 0.05; // barely visible
      setTimeout(() => {
        doctrine.textContent = vertical("IRON FORTRESS");
        doctrine.style.opacity = 1;
      }, 400); // short flash duration
    }
  }, 10000); // check every 10 seconds for a rare flash
  }

/* EVA */
let sv=72,mv=64,cv=58;
function drift(v,r){return Math.max(5,Math.min(95,v+(Math.random()*r-r/2)));}
setInterval(()=>{
  sv=drift(sv,6); mv=drift(mv,8); cv=drift(cv,10);
  sync.style.width=sv+"%";
  mental.style.width=mv+"%";
  core.style.width=cv+"%";
  evaWarning.textContent=
    (mv<40||cv>80)?"STATUS: DANGER":(mv<55?"STATUS: CAUTION":"STATUS: NOMINAL");
},1800);
</script>

</body>
</html>
